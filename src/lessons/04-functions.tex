% SPDX-License-Identifier: CC-BY-NC-SA-4.0
%
% 04-functions.tex -- becoming lazy
% Copyright (C) 2024  Jacob Koziej <jacobkoziej@gmail.com>

\documentclass{article}

\input{preamble}
\title{Lesson 04: Functions}
\input{postamble}

\begin{document}
\renderTitle

Now that we've gotten past vectorization, we're ready to step into the
world of abstraction.  Functions in any programming language allow us to
modularize and organize our code but, most of all, reduce repetition.

\section{Control Flow}

Since we can't vectorize every operation, sometimes we may need to
resort to traditional control flow structures you might come to expect
from a programming language.

\subsection{If\dots Else Statements}

\inputminted{matlab}{04-functions.d/if-else.m}

\subsection{For Loops}

\inputminted{matlab}{04-functions.d/for.m}

\subsection{While Loops}

\inputminted{matlab}{04-functions.d/while.m}

\subsection{Try\dots Catch Blocks}

\inputminted{matlab}{04-functions.d/try-catch.m}

\section{Anonymous Functions}

An anonymous function is a function that is not stored in a program
file, but is associated with a variable whose data type is \mCommand[%
https://www.mathworks.com/help/matlab/ref/function_handle.html]{%
function_handle}.  Anonymous functions can accept multiple inputs and
return one output. They can contain only a single executable statement.%
\footurl{https://www.mathworks.com/help/matlab/matlab_prog/anonymous-%
functions.html}

We can create a function that squares like so:

\inputminted{matlab}{04-functions.d/sq.m}

Anonymous functions also capture context:

\mCommandOutput{04-functions.d/cap}

\section{Function Handles}

Function handles are essentially watered-down function pointers and
allow us to do some pretty magical stuff:

\mCommandOutput{04-functions.d/handle}

\section{Standalone Functions}

Functions in MATLAB can be defined in multiple ways, \emph{however}, the
most sane way is to have them stored in a standalone M-file.  Take for
example \texttt{fib.m}:

\inputminted{matlab}{04-functions.d/fib.m}

If \texttt{fib.m} is in our MATLAB path we can then call it like any
other function:

\mCommandOutput{04-functions.d/fib-call}

\newpage

Now for a few notes about function definitions:\footurl{https://www.%
mathworks.com/help/matlab/matlab_prog/types-of-functions.html}

\begin{itemize}
	\item
		If you wish to define a function in a script file, you
		can only do so at the \emph{end} of the file.

	\item
		For standalone functions, you may additionally define
		local functions \emph{after} your standalone function.

	\item
		Nested functions lexically scope to the function in
		which they're defined and are free to access variables
		of the parent function.
\end{itemize}

\subsection{Multiple Inputs/Outputs}

\aside{If you're interested in how to define functions with
variable-length inputs/outputs, feel free to check out \mCommand[https:%
//www.mathworks.com/help/matlab/ref/varargin.html]{varargin} and
\mCommand[https://www.mathworks.com/help/matlab/ref/varargout.html]{%
varargout}.}

\inputminted{matlab}{04-functions.d/outer_product.m}

We can then call the function like so:

\mCommandOutput{04-functions.d/outer_product-call}

\section{Classes}

Classes are beyond the scope of this course, but MATLAB's online
documentation is a great starting point for the interested reader:
\url{https://www.mathworks.com/help/matlab/object-oriented-programming.%
html}.
\end{document}
